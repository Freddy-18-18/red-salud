// Motivos de consulta organizados por categoría para sugerencias inteligentes
export const CONSULTATION_REASONS = [
  // --- ODONTOLOGÍA (NUEVO) ---
  "Limpieza dental (Profilaxis)",
  "Dolor de muela",
  "Caries dental",
  "Gingivitis (Encías inflamadas)",
  "Sangrado de encías",
  "Mal aliento (Halitosis)",
  "Blanqueamiento dental",
  "Extracción de muela",
  "Extracción de muela del juicio",
  "Ortodoncia (Brackets)",
  "Ajuste de brackets",
  "Revisión de ortodoncia",
  "Implante dental",
  "Prótesis dental",
  "Sensibilidad dental",
  "Bruxismo (Rechinar dientes)",
  "Férula de descarga",
  "Endodoncia (Tratamiento de conducto)",
  "Absceso dental",
  "Diente roto o astillado",
  "Restauración dental (Empaste)",

  // --- NUTRICIÓN Y DIETÉTICA (NUEVO) ---
  "Control de peso",
  "Plan de alimentación personalizado",
  "Nutrición deportiva",
  "Nutrición para diabéticos",
  "Nutrición para hipertensos",
  "Alergias alimentarias",
  "Intolerancias alimentarias",
  "Trastornos de la conducta alimentaria",
  "Anorexia",
  "Bulimia",
  "Suplementación nutricional",
  "Evaluación antropométrica",

  // --- SÍNTOMAS GENERALES ---
  "Dolor de cabeza",
  "Dolor de cabeza persistente",
  "Dolor de cabeza tipo pulsátil",
  "Migraña con aura",
  "Migraña sin aura",
  "Cefalea tensional",
  "Fiebre",
  "Fiebre alta persistente",
  "Fiebre intermitente",
  "Escalofríos",
  "Malestar general",
  "Cuerpo cortado",
  "Fatiga crónica",
  "Cansancio extremo",
  "Debilidad generalizada",
  "Pérdida de apetito (Hiporexia)",
  "Pérdida de peso involuntaria",
  "Aumento de peso repentino",
  "Sudoración nocturna",
  "Mareos",
  "Vértigo postural",
  "Desmayos (Síncope)",
  "Desvanecimiento",
  "Sed excesiva (Polidipsia)",

  // --- RESPIRATORIO ---
  "Tos seca",
  "Tos productiva (con flema)",
  "Tos crónica",
  "Tos nocturna",
  "Expectoración con sangre (Hemoptisis)",
  "Dolor de garganta",
  "Ardor de garganta",
  "Dificultad para tragar (Disfagia)",
  "Ronquera (Disfonía)",
  "Pérdida de voz (Afonía)",
  "Congestión nasal",
  "Secreción nasal (Rinorrea)",
  "Estornudos frecuentes",
  "Gripe estacional",
  "Resfriado común",
  "Dificultad para respirar (Disnea)",
  "Falta de aire al caminar",
  "Falta de aire al acostarse",
  "Sibilancias (Silbido en el pecho)",
  "Dolor torácico al respirar",
  "Asma bronquial",
  "Crisis asmática",
  "Bronquitis aguda",
  "Bronquitis crónica",
  "Neumonía adquirida en comunidad",
  "Sinusitis aguda",
  "Sinusitis crónica",
  "Rinitis alérgica",
  "Apnea del sueño",
  "Ronquidos fuertes",

  // --- GASTROINTESTINAL ---
  "Dolor abdominal agudo",
  "Dolor abdominal crónico",
  "Dolor en boca del estómago",
  "Ardor estomacal (Pirosis)",
  "Reflujo gastroesofágico",
  "Regurgitación ácida",
  "Sensación de plenitud gástrica",
  "Indigestión (Dispepsia)",
  "Distensión abdominal (Hinchazón)",
  "Gases excesivos (Meteorismo)",
  "Náuseas constantes",
  "Vómitos",
  "Vómitos con sangre (Hematemesis)",
  "Diarrea aguda",
  "Diarrea crónica",
  "Diarrea con moco o sangre",
  "Estreñimiento crónico",
  "Dificultad para evacuar",
  "Heces negras (Melena)",
  "Sangrado rectal",
  "Hemorroides inflamadas",
  "Dolor anal",
  "Fisura anal",
  "Síndrome de intestino irritable",
  "Colitis nerviosa",
  "Gastritis erosiva",
  "Úlcera péptica",
  "Cálculos en la vesícula (Colelitiasis)",
  "Cólico biliar",
  "Hepatitis",
  "Ictericia (Piel amarilla)",
  "Intolerancia a la lactosa",
  "Celiaquía",

  // --- CARDIOVASCULAR ---
  "Dolor en el pecho (precordial)",
  "Opresión en el pecho",
  "Palpitaciones cardíacas",
  "Taquicardia",
  "Bradicardia",
  "Presión arterial alta (Hipertensión)",
  "Crisis hipertensiva",
  "Presión arterial baja (Hipotensión)",
  "Mareo al levantarse",
  "Hinchazón de piernas (Edema)",
  "Varices dolorosas",
  "Insuficiencia venosa",
  "Mala circulación",
  "Dolor en pantorrillas al caminar",
  "Arritmia cardíaca",
  "Soplo cardíaco",
  "Riesgo cardiovascular",

  // --- MUSCULOESQUELÉTICO Y FISIOTERAPIA ---
  "Dolor de espalda alta (Dorsalgia)",
  "Dolor de espalda baja (Lumbalgia)",
  "Lumbago con ciática",
  "Dolor de cuello (Cervicalgia)",
  "Rigidez de cuello",
  "Tortícolis",
  "Dolor de hombro",
  "Manguito rotador",
  "Dolor de codo",
  "Codo de tenista",
  "Dolor de muñeca",
  "Síndrome del túnel carpiano",
  "Dolor de manos",
  "Dolor de dedos",
  "Dolor de cadera",
  "Dolor de rodilla (Gonalgia)",
  "Lesión de menisco",
  "Dolor de tobillo",
  "Esguince de tobillo",
  "Fascitis plantar",
  "Espolón calcáneo",
  "Dolor muscular generalizado (Mialgia)",
  "Calambres musculares",
  "Debilidad muscular",
  "Contractura muscular",
  "Desgarro muscular",
  "Dolor articular (Artralgia)",
  "Inflamación articular",
  "Artritis reumatoide",
  "Osteoartritis",
  "Gota",
  "Fractura ósea",
  "Fisura ósea",
  "Luxación",
  "Tendinitis",
  "Bursitis",
  "Osteoporosis",
  "Fibromialgia",
  "Rehabilitación física",
  "Terapia manual",
  "Masaje terapéutico",

  // --- DERMATOLÓGICO ---
  "Erupción cutánea (Rash)",
  "Picazón intensa (Prurito)",
  "Ronchas (Urticaria)",
  "Manchas en la piel",
  "Cambios en lunares",
  "Acné severo",
  "Dermatitis atópica",
  "Dermatitis de contacto",
  "Dermatitis seborreica",
  "Psoriasis",
  "Rosácea",
  "Eczema",
  "Piel seca (Xerosis)",
  "Infección de piel",
  "Celulitis infecciosa",
  "Absceso cutáneo",
  "Forúnculo",
  "Hongos en la piel (Micosis)",
  "Pie de atleta",
  "Hongos en uñas (Onicomicosis)",
  "Verrugas vulgares",
  "Mezquinos",
  "Herpes labial",
  "Herpes zóster (Culebrilla)",
  "Quemadura solar",
  "Quemadura térmica",
  "Herida cortante",
  "Úlcera varicosa",
  "Caída del cabello (Alopecia)",
  "Caspa severa",

  // --- NEUROLÓGICO ---
  "Dolor de cabeza tensional",
  "Migraña crónica",
  "Neuralgia del trigémino",
  "Parálisis facial",
  "Vértigo periférico",
  "Mareo constante",
  "Pérdida de equilibrio",
  "Entumecimiento (Parestesias)",
  "Hormigueo en manos/pies",
  "Temblor en manos",
  "Parkinson",
  "Convulsiones",
  "Epilepsia",
  "Pérdida de memoria reciente",
  "Confusión mental",
  "Dificultad para hablar",
  "Problemas de concentración",
  "Trastornos del sueño",
  "Insomnio de conciliación",
  "Neuropatía diabética",

  // --- OFTALMOLÓGICO ---
  "Dolor ocular",
  "Ardor en los ojos",
  "Ojos rojos",
  "Lagrimeo excesivo",
  "Ojo seco",
  "Sensación de cuerpo extraño",
  "Visión borrosa de lejos",
  "Visión borrosa de cerca",
  "Visión doble (Diplopía)",
  "Pérdida súbita de visión",
  "Destellos de luz",
  "Moscas volantes",
  "Conjuntivitis bacteriana",
  "Conjuntivitis alérgica",
  "Orzuelo",
  "Chalazión",
  "Blefaritis",
  "Glaucoma",
  "Cataratas",
  "Examen de la vista",
  "Medida de lentes",

  // --- OTORRINOLARINGOLÓGICO ---
  "Dolor de oído (Otalgia)",
  "Sensación de oído tapado",
  "Supuración de oído (Otorrea)",
  "Pérdida de audición (Hipoacusia)",
  "Zumbido en oídos (Tinnitus)",
  "Otitis media",
  "Otitis externa",
  "Tapón de cerumen",
  "Sangrado nasal (Epistaxis)",
  "Desviación de tabique",
  "Pólipos nasales",
  "Amigdalitis aguda",
  "Faringitis",
  "Laringitis",

  // --- UROLÓGICO ---
  "Dolor al orinar (Disuria)",
  "Ardor al orinar",
  "Orina frecuente (Polaquiuria)",
  "Urgencia urinaria",
  "Orina con sangre (Hematuria)",
  "Orina turbia o con mal olor",
  "Dolor en flanco (Riñón)",
  "Cólico nefrítico",
  "Cálculos renales (Litiasis)",
  "Infección de vías urinarias",
  "Cistitis",
  "Pielonefritis",
  "Incontinencia urinaria",
  "Retención urinaria",
  "Dificultad para iniciar micción",
  "Chorro urinario débil",
  "Hiperplasia prostática",
  "Prostatitis",
  "Disfunción eréctil",

  // --- GINECOLÓGICO ---
  "Dolor menstrual (Dismenorrea)",
  "Cólicos menstruales intensos",
  "Menstruación abundante (Menorragia)",
  "Menstruación irregular",
  "Ausencia de menstruación (Amenorrea)",
  "Sangrado intermenstrual",
  "Sangrado postcoital",
  "Flujo vaginal anormal",
  "Picazón vaginal",
  "Mal olor vaginal",
  "Infección vaginal (Candidiasis/Vaginosis)",
  "Dolor pélvico",
  "Dolor durante relaciones sexuales",
  "Síndrome premenstrual",
  "Síntomas de menopausia",
  "Sofocos",
  "Sequedad vaginal",
  "Control ginecológico anual",
  "Papanicolau (Citología)",
  "Planificación familiar",
  "Control de embarazo",
  "Sospecha de embarazo",
  "Mastitis",
  "Dolor en senos",
  "Bulto en seno",

  // --- ENDOCRINO ---
  "Diabetes Mellitus Tipo 1",
  "Diabetes Mellitus Tipo 2",
  "Descontrol glucémico",
  "Hipoglucemia",
  "Pie diabético",
  "Hipotiroidismo",
  "Hipertiroidismo",
  "Bocio",
  "Nódulo tiroideo",
  "Obesidad mórbida",
  "Sobrepeso",
  "Síndrome metabólico",
  "Colesterol alto (Hipercolesterolemia)",
  "Triglicéridos altos",

  // --- SALUD MENTAL ---
  "Ansiedad generalizada",
  "Crisis de ansiedad",
  "Ataques de pánico",
  "Depresión mayor",
  "Tristeza profunda",
  "Estrés laboral (Burnout)",
  "Estrés agudo",
  "Trastorno de estrés postraumático",
  "Insomnio crónico",
  "Pesadillas frecuentes",
  "Trastorno bipolar",
  "Cambios de humor bruscos",
  "Irritabilidad excesiva",
  "Duelo",
  "Problemas de pareja",
  "Adicciones",
  "Terapia psicológica",

  // --- PEDIÁTRICO ---
  "Fiebre en niños",
  "Tos en niños",
  "Moco en niños",
  "Dolor de barriga en niños",
  "Diarrea infantil",
  "Vómitos en niños",
  "Estreñimiento infantil",
  "Cólicos del lactante",
  "Reflujo en bebés",
  "Dermatitis del pañal",
  "Brote de dientes",
  "Vacunación",
  "Control de niño sano",
  "Evaluación de crecimiento",
  "Problemas de alimentación",
  "Problemas de sueño en niños",
  "Hiperactividad",
  "Problemas de aprendizaje",

  // --- PREVENTIVO Y ADMINISTRATIVO ---
  "Chequeo general (Check-up)",
  "Examen físico anual",
  "Certificado médico laboral",
  "Certificado médico escolar",
  "Certificado de aptitud física",
  "Evaluación preoperatoria",
  "Lectura de exámenes",
  "Revisión de estudios",
  "Renovación de receta",
  "Segunda opinión",
  "Curación de herida",
  "Retiro de puntos",
  "Lavado de oídos",
  "Aplicación de inyección",

  // --- OTROS / URGENCIAS MENORES ---
  "Reacción alérgica leve",
  "Picadura de insecto",
  "Mordedura de animal",
  "Golpe en la cabeza",
  "Traumatismo leve",
  "Intoxicación alimentaria",
  "Deshidratación leve",
  "Insolación",
  "Cuerpo extraño en ojo",
  "Cuerpo extraño en oído/nariz",
  "Lavado gástrico"
];

// Normaliza texto para búsqueda (quita acentos, minúsculas)
const normalizeText = (text: string) => {
  return text
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "");
};

// Función de búsqueda avanzada y eficiente
export function searchConsultationReasons(query: string): string[] {
  if (!query || query.trim().length === 0) return [];

  const normalizedQuery = normalizeText(query.trim());
  const terms = normalizedQuery.split(/\s+/); // Separar por palabras

  // Filtrar y rankear resultados
  return CONSULTATION_REASONS
    .filter(reason => {
      const normalizedReason = normalizeText(reason);
      // Debe contener todos los términos de búsqueda
      return terms.every(term => normalizedReason.includes(term));
    })
    .sort((a, b) => {
      const normA = normalizeText(a);
      const normB = normalizeText(b);
      const normQuery = normalizedQuery;

      // Criterios de ordenamiento:
      // 1. Coincidencia exacta
      if (normA === normQuery) return -1;
      if (normB === normQuery) return 1;

      // 2. Empieza con la búsqueda (más relevante)
      const aStarts = normA.startsWith(normQuery);
      const bStarts = normB.startsWith(normQuery);
      if (aStarts && !bStarts) return -1;
      if (!aStarts && bStarts) return 1;

      // 3. Menor longitud (más conciso suele ser mejor)
      return a.length - b.length;
    })
    .slice(0, 20); // Retornar top 20 resultados
}